# 트랜잭션(Transaction)

## 트랜잭션(Transaction)이란?
- 데이터 무결성이 보장되는 상태에서 데이터 조작 언어(DML, data Manipulation Language) 작업을 완수하기 위한 논리적인 작업 단위이다.  
- DML실행과 동시성 제어(Concurrence Control)를 위한 중요한 개념이다.  
- 데이터 처리 시 정상 종료, 사용자 프로세스 실패, 시스템 실패와 같은 비정상 종료에 대한 데이터 신뢰성과 일관성 보장한다.  
- DML 작업인 삽입(INSERT), 수정(UPDATE), 삭제(DELETE)를 실행하여 COMMIT 또는 ROLLBACK을 실행하는 과정까지를 트랜잭션이라 부른다.  
- 하나의 작업으로 이루어져야 하는 여러 작업(DML쿼리)의 묶음이라고 생각하면 된다.  
<br/>
<br/>

## 트랜잭션의 특징(ACID)
- **원자성(Atomicity)** : 트랜잭션은 분해가 불가능한 최소의 단위인 하나의 원자처럼 동작한다는 것을 의미한다. 트랜잭션 안에서의 작업은 모두 성공하거나 하나라도 실패한다면 모두 실패한 상태여야 한다.(all or nothing[모두성공 or 모두실패])  
- **일관성(Consistency)** : 트랜잭션 실행이 성공적으로 완료되면 데이터베이스는 모순 없이 일관성이 보존된 상태여야 함(처리 결과 그대로 DB에 적용)  
- **고립(격리)성(Isolation)** : 트랜잭션 작업 수행 중에는 다른 트랜잭션에 영향을 주어서도 안되고, 다른 트랜잭션들에 의해 간섭을 받아서도 안 된다는 것을 의미한다.  
- **지속성(Durability)** : 트랜잭션이 성공하면 트랜잭션의 결과를 영구적으로 보장해야함, 장애 발생 시에도 복구가 가능 해야 한다.  
<br/>
<br/>


## 트랜잭션의 상태변화

![img1 daumcdn](https://user-images.githubusercontent.com/95058915/208604303-44bc7880-ff34-4249-bf5f-48dbb1a84cc3.png)


### 트랜잭션의 수행 단계별 상태 변화 과정
\- 활성(active) : 트랜잭션 실행 중  
\- 부분 완료(partially commited) : 트랜잭션 명령 실행 후 상태  
\- 완료(commited) : 트랜잭션 성공 완료  
\- 실패(failed) : 더 이상 정상적인 실행 불가  
\- 철회(aborted) : 트랜잭션 복원으로 수행 이전 상태로 복귀 (rollback시킴)  
\- 커밋(commit) : 트랜잭션의 모든 데이터를 영구적으로 반영  
\- 롤백(rollback) : 트랜잭션의 모든 데이터 변경을 포기  
<br/>
<br/>

#### **커밋 이전**
\- 데이터 변경 이전 상태로 복구가 가능하다.  
\- 현재 사용자만 작업 결과의 확인이 가능하다.  
\- 다른 사용자는 확인이 불가능하다.  
\- 변경 중인 행은 접근 제어 상태이다.  
\- 다른 사용자가 변경 불가능하다.  

<br/>
<br/>

#### **커밋 이후**
\- 데이터를 영구적으로 변경/적용 한다.  
\- 기존 데이터가 상실된다.  
\- 모든 사용자가 결과 확인이 가능하다.  
\- 접근 제어 상태가 해지된다.  
\- 다른 사용자가 변경 가능해진다.  

<br/>
<br/>
<br/>
